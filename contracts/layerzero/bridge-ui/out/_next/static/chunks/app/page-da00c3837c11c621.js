(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9848:function(e,a,t){Promise.resolve().then(t.bind(t,4457))},4457:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var s=t(7437),n=t(2265),r=t(9146),i=t(3600),c=t(5810),l=t(1662),o=t(5),d=t(4552);let u={sepolia:{id:11155111,name:"Ethereum Sepolia",shortName:"Sepolia",lzChainId:10161,rpcUrl:"https://ethereum-sepolia-rpc.publicnode.com",explorer:"https://sepolia.etherscan.io",oftAddress:"0x688b1c1b22aA1bDff449285A6F954aFdC9DE05d9",isNative:!0,icon:"⟠"},arbitrumSepolia:{id:421614,name:"Arbitrum Sepolia",shortName:"Arb Sepolia",lzChainId:10231,rpcUrl:"https://sepolia-rollup.arbitrum.io/rpc",explorer:"https://sepolia.arbiscan.io",oftAddress:"0xcbAddD7bC31A41Fb9acC4f7de961d26d145d1FF6",isNative:!1,icon:"\uD83D\uDD35"}},h=["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)","function lockedSupply() view returns (uint256)","function isNativeChain() view returns (bool)","function bridge(uint16 _dstChainId, bytes calldata _toAddress, uint256 _amount, address payable _refundAddress, address _zroPaymentAddress, bytes calldata _adapterParams) external payable","function estimateBridgeFee(uint16 _dstChainId, bytes calldata _toAddress, uint256 _amount, bool _useZro, bytes calldata _adapterParams) external view returns (uint256 nativeFee, uint256 zroFee)"];function m(){let[e,a]=(0,n.useState)(""),[t,m]=(0,n.useState)(null),[p,b]=(0,n.useState)(0),[f,w]=(0,n.useState)("sepolia"),[x,N]=(0,n.useState)("arbitrumSepolia"),[j,v]=(0,n.useState)(""),[g,C]=(0,n.useState)("0"),[y,S]=(0,n.useState)({}),[F,k]=(0,n.useState)("idle"),[_,H]=(0,n.useState)(""),[A,T]=(0,n.useState)(""),[B,E]=(0,n.useState)(!1),z=void 0!==window.ethereum,I=async()=>{if(!z){alert("Please install MetaMask to use this bridge");return}try{let e=new r.Q(window.ethereum),t=await e.send("eth_requestAccounts",[]),s=await e.getNetwork();m(e),a(t[0]),b(Number(s.chainId))}catch(e){console.error("Failed to connect:",e),alert("Failed to connect wallet")}},D=()=>{m(null),a(""),b(0),S({})},P=async e=>{if(!window.ethereum)return;let a="0x"+e.toString(16);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:a}]})}catch(t){if(4902===t.code){let t=Object.values(u).find(a=>a.id===e);t&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:a,chainName:t.name,rpcUrls:[t.rpcUrl],blockExplorerUrls:[t.explorer]}]})}}},L=(0,n.useCallback)(async()=>{if(!e)return;let a={};for(let[t,s]of Object.entries(u))try{let n=new i.r6(s.rpcUrl),r=new c.CH(s.oftAddress,h,n),o=await r.balanceOf(e);a[t]=l.bM(o,8)}catch(e){console.error("Failed to fetch balance for ".concat(t,":"),e),a[t]="0"}S(a)},[e]),O=(0,n.useCallback)(async()=>{if(!j||0>=parseFloat(j)){C("0");return}try{let a=u[f],t=u[x],s=new i.r6(a.rpcUrl),n=new c.CH(a.oftAddress,h,s),r=l.vz(j,8),m=o.VT(["address"],[e||d.N]),[p]=await n.estimateBridgeFee(t.lzChainId,m,r,!1,"0x");C(l.dF(p))}catch(e){console.error("Failed to estimate fee:",e),C("0")}},[j,f,x,e]),U=async()=>{if(!t||!e||!j)return;let a=u[f],s=u[x];if(p!==a.id){await P(a.id);return}E(!0),k("pending"),H("Preparing transaction...");try{let n=await t.getSigner(),r=new c.CH(a.oftAddress,h,n),i=l.vz(j,8),u=o.VT(["address"],[e]),[m]=await r.estimateBridgeFee(s.lzChainId,u,i,!1,"0x");H("Please confirm in MetaMask...");let p=await r.bridge(s.lzChainId,u,i,e,d.N,"0x",{value:m});T(p.hash),H("Transaction submitted, waiting for confirmation..."),await p.wait(),k("success"),H("Bridged ".concat(j," HTH from ").concat(a.shortName," to ").concat(s.shortName)),setTimeout(L,5e3)}catch(e){console.error("Bridge failed:",e),k("error"),H(e.reason||e.message||"Bridge failed")}finally{E(!1)}};(0,n.useEffect)(()=>{e&&L()},[e,L]),(0,n.useEffect)(()=>{let e=setTimeout(O,500);return()=>clearTimeout(e)},[O]),(0,n.useEffect)(()=>{if(!window.ethereum)return;let e=e=>{0===e.length?D():a(e[0])},t=e=>{b(parseInt(e,16))};return window.ethereum.on("accountsChanged",e),window.ethereum.on("chainChanged",t),()=>{window.ethereum.removeListener("accountsChanged",e),window.ethereum.removeListener("chainChanged",t)}},[]);let M=u[f],Z=u[x],q=e&&p!==M.id,V=e&&j&&parseFloat(j)>0&&parseFloat(j)<=parseFloat(y[f]||"0");return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("h1",{children:"HTH Bridge"}),(0,s.jsx)("p",{children:"Bridge HTH tokens across chains via LayerZero"})]}),(0,s.jsx)("div",{className:"card",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"wallet-info",children:[(0,s.jsxs)("span",{className:"wallet-address",children:[e.slice(0,6),"...",e.slice(-4)]}),(0,s.jsx)("button",{className:"disconnect-btn",onClick:D,children:"Disconnect"})]}),(0,s.jsxs)("div",{className:"chain-selector",children:[(0,s.jsxs)("div",{className:"chain-box ".concat(p===M.id?"selected":""),onClick:()=>P(M.id),children:[(0,s.jsx)("div",{className:"chain-icon",children:M.icon}),(0,s.jsx)("div",{className:"chain-name",children:M.shortName})]}),(0,s.jsx)("button",{className:"swap-btn",onClick:()=>{w(x),N(f)},children:"⇄"}),(0,s.jsxs)("div",{className:"chain-box",children:[(0,s.jsx)("div",{className:"chain-icon",children:Z.icon}),(0,s.jsx)("div",{className:"chain-name",children:Z.shortName})]})]}),(0,s.jsxs)("div",{className:"amount-section",children:[(0,s.jsxs)("div",{className:"amount-label",children:[(0,s.jsx)("span",{children:"Amount"}),(0,s.jsxs)("span",{children:["Balance: ",parseFloat(y[f]||"0").toLocaleString()," HTH"]})]}),(0,s.jsxs)("div",{className:"amount-input-wrapper",children:[(0,s.jsx)("input",{type:"number",className:"amount-input",placeholder:"0.0",value:j,onChange:e=>v(e.target.value)}),(0,s.jsx)("button",{className:"max-btn",onClick:()=>{v(y[f]||"0")},children:"MAX"}),(0,s.jsx)("span",{className:"token-badge",children:"HTH"})]})]}),(0,s.jsxs)("div",{className:"fee-info",children:[(0,s.jsxs)("div",{className:"fee-row",children:[(0,s.jsx)("span",{children:"Bridge Fee"}),(0,s.jsxs)("span",{children:[parseFloat(g).toFixed(6)," ETH"]})]}),(0,s.jsxs)("div",{className:"fee-row",children:[(0,s.jsx)("span",{children:"You will receive"}),(0,s.jsxs)("span",{children:[j||"0"," HTH"]})]})]}),q?(0,s.jsxs)("button",{className:"bridge-btn",onClick:()=>P(M.id),children:["Switch to ",M.shortName]}):(0,s.jsxs)("button",{className:"bridge-btn",onClick:U,disabled:!V||B,children:[B&&(0,s.jsx)("span",{className:"spinner"}),B?"Bridging...":"Bridge HTH"]}),"idle"!==F&&(0,s.jsxs)("div",{className:"status ".concat(F),children:[(0,s.jsx)("p",{children:_}),A&&(0,s.jsx)("p",{children:(0,s.jsx)("a",{href:"".concat("https://testnet.layerzeroscan.com/tx/").concat(A),target:"_blank",rel:"noopener noreferrer",children:"View on LayerZero Scan →"})})]}),(0,s.jsx)("div",{className:"balances",children:Object.entries(u).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"balance-item",children:[(0,s.jsxs)("div",{className:"balance-chain",children:[t.icon," ",t.shortName]}),(0,s.jsxs)("div",{className:"balance-amount",children:[parseFloat(y[a]||"0").toLocaleString()," HTH"]})]},a)})})]}):(0,s.jsx)("button",{className:"connect-btn",onClick:I,children:"Connect Wallet"})}),(0,s.jsxs)("div",{className:"footer",children:["Powered by ",(0,s.jsx)("a",{href:"https://layerzero.network",target:"_blank",rel:"noopener noreferrer",children:"LayerZero"})]})]})}}},function(e){e.O(0,[986,971,117,744],function(){return e(e.s=9848)}),_N_E=e.O()}]);