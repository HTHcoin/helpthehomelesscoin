(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9848:function(e,a,t){Promise.resolve().then(t.bind(t,4457))},4457:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var s=t(7437),n=t(2265),r=t(9146),i=t(3600),l=t(5810),c=t(1662),o=t(5),d=t(4552);let u={sepolia:{id:11155111,name:"Ethereum Sepolia",shortName:"Sepolia",lzChainId:10161,rpcUrl:"https://ethereum-sepolia-rpc.publicnode.com",explorer:"https://sepolia.etherscan.io",oftAddress:"0x688b1c1b22aA1bDff449285A6F954aFdC9DE05d9",isNative:!0,icon:"⟠"},arbitrumSepolia:{id:421614,name:"Arbitrum Sepolia",shortName:"Arb Sepolia",lzChainId:10231,rpcUrl:"https://sepolia-rollup.arbitrum.io/rpc",explorer:"https://sepolia.arbiscan.io",oftAddress:"0xcbAddD7bC31A41Fb9acC4f7de961d26d145d1FF6",isNative:!1,icon:"\uD83D\uDD35"},bscTestnet:{id:97,name:"BSC Testnet",shortName:"BSC Test",lzChainId:10102,rpcUrl:"https://data-seed-prebsc-1-s1.binance.org:8545/",explorer:"https://testnet.bscscan.com",oftAddress:"0xcbAddD7bC31A41Fb9acC4f7de961d26d145d1FF6",isNative:!1,icon:"\uD83D\uDFE1"}},h=["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)","function lockedSupply() view returns (uint256)","function isNativeChain() view returns (bool)","function bridge(uint16 _dstChainId, bytes calldata _toAddress, uint256 _amount, address payable _refundAddress, address _zroPaymentAddress, bytes calldata _adapterParams) external payable","function estimateBridgeFee(uint16 _dstChainId, bytes calldata _toAddress, uint256 _amount, bool _useZro, bytes calldata _adapterParams) external view returns (uint256 nativeFee, uint256 zroFee)"];function m(){let[e,a]=(0,n.useState)(""),[t,m]=(0,n.useState)(null),[p,b]=(0,n.useState)(0),[w,f]=(0,n.useState)("sepolia"),[x,j]=(0,n.useState)("arbitrumSepolia"),[N,v]=(0,n.useState)(""),[g,C]=(0,n.useState)("0"),[F,S]=(0,n.useState)({}),[y,k]=(0,n.useState)("idle"),[_,A]=(0,n.useState)(""),[H,T]=(0,n.useState)(""),[B,E]=(0,n.useState)(!1),z=void 0!==window.ethereum,D=async()=>{if(!z){alert("Please install MetaMask to use this bridge");return}try{let e=new r.Q(window.ethereum),t=await e.send("eth_requestAccounts",[]),s=await e.getNetwork();m(e),a(t[0]),b(Number(s.chainId))}catch(e){console.error("Failed to connect:",e),alert("Failed to connect wallet")}},I=()=>{m(null),a(""),b(0),S({})},O=async e=>{if(!window.ethereum)return;let a="0x"+e.toString(16);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:a}]})}catch(t){if(4902===t.code){let t=Object.values(u).find(a=>a.id===e);t&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:a,chainName:t.name,rpcUrls:[t.rpcUrl],blockExplorerUrls:[t.explorer]}]})}}},P=(0,n.useCallback)(async()=>{if(!e)return;let a={};for(let[t,s]of Object.entries(u))try{let n=new i.r6(s.rpcUrl),r=new l.CH(s.oftAddress,h,n),o=await r.balanceOf(e);a[t]=c.bM(o,8)}catch(e){console.error("Failed to fetch balance for ".concat(t,":"),e),a[t]="0"}S(a)},[e]),U=(0,n.useCallback)(async()=>{if(!N||0>=parseFloat(N)){C("0");return}try{let a=u[w],t=u[x],s=new i.r6(a.rpcUrl),n=new l.CH(a.oftAddress,h,s),r=c.vz(N,8),m=o.VT(["address"],[e||d.N]),[p]=await n.estimateBridgeFee(t.lzChainId,m,r,!1,"0x");C(c.dF(p))}catch(e){console.error("Failed to estimate fee:",e),C("0")}},[N,w,x,e]),L=async()=>{if(!t||!e||!N)return;let a=u[w],s=u[x];if(p!==a.id){await O(a.id);return}E(!0),k("pending"),A("Preparing transaction...");try{let n=await t.getSigner(),r=new l.CH(a.oftAddress,h,n),i=c.vz(N,8),u=o.VT(["address"],[e]),[m]=await r.estimateBridgeFee(s.lzChainId,u,i,!1,"0x");A("Please confirm in MetaMask...");let p=await r.bridge(s.lzChainId,u,i,e,d.N,"0x",{value:m});T(p.hash),A("Transaction submitted, waiting for confirmation..."),await p.wait(),k("success"),A("Bridged ".concat(N," HTH from ").concat(a.shortName," to ").concat(s.shortName)),setTimeout(P,5e3)}catch(e){console.error("Bridge failed:",e),k("error"),A(e.reason||e.message||"Bridge failed")}finally{E(!1)}};(0,n.useEffect)(()=>{e&&P()},[e,P]),(0,n.useEffect)(()=>{let e=setTimeout(U,500);return()=>clearTimeout(e)},[U]),(0,n.useEffect)(()=>{if(!window.ethereum)return;let e=e=>{0===e.length?I():a(e[0])},t=e=>{b(parseInt(e,16))};return window.ethereum.on("accountsChanged",e),window.ethereum.on("chainChanged",t),()=>{window.ethereum.removeListener("accountsChanged",e),window.ethereum.removeListener("chainChanged",t)}},[]);let M=u[w];u[x];let Z=e&&p!==M.id,q=e&&N&&parseFloat(N)>0&&parseFloat(N)<=parseFloat(F[w]||"0");return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("h1",{children:"HTH Bridge"}),(0,s.jsx)("p",{children:"Bridge HTH tokens across chains via LayerZero"})]}),(0,s.jsx)("div",{className:"card",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"wallet-info",children:[(0,s.jsxs)("span",{className:"wallet-address",children:[e.slice(0,6),"...",e.slice(-4)]}),(0,s.jsx)("button",{className:"disconnect-btn",onClick:I,children:"Disconnect"})]}),(0,s.jsxs)("div",{className:"chain-selector",children:[(0,s.jsxs)("div",{className:"chain-select-wrapper",children:[(0,s.jsx)("label",{children:"From"}),(0,s.jsx)("select",{className:"chain-select",value:w,onChange:e=>{let a=e.target.value;a===x&&j(w),f(a)},children:Object.entries(u).map(e=>{let[a,t]=e;return(0,s.jsxs)("option",{value:a,children:[t.icon," ",t.shortName]},a)})}),p!==M.id&&(0,s.jsx)("button",{className:"switch-network-btn",onClick:()=>O(M.id),children:"Switch Network"})]}),(0,s.jsx)("button",{className:"swap-btn",onClick:()=>{f(x),j(w)},children:"⇄"}),(0,s.jsxs)("div",{className:"chain-select-wrapper",children:[(0,s.jsx)("label",{children:"To"}),(0,s.jsx)("select",{className:"chain-select",value:x,onChange:e=>{let a=e.target.value;a===w&&f(x),j(a)},children:Object.entries(u).map(e=>{let[a,t]=e;return(0,s.jsxs)("option",{value:a,children:[t.icon," ",t.shortName]},a)})})]})]}),(0,s.jsxs)("div",{className:"amount-section",children:[(0,s.jsxs)("div",{className:"amount-label",children:[(0,s.jsx)("span",{children:"Amount"}),(0,s.jsxs)("span",{children:["Balance: ",parseFloat(F[w]||"0").toLocaleString()," HTH"]})]}),(0,s.jsxs)("div",{className:"amount-input-wrapper",children:[(0,s.jsx)("input",{type:"number",className:"amount-input",placeholder:"0.0",value:N,onChange:e=>v(e.target.value)}),(0,s.jsx)("button",{className:"max-btn",onClick:()=>{v(F[w]||"0")},children:"MAX"}),(0,s.jsx)("span",{className:"token-badge",children:"HTH"})]})]}),(0,s.jsxs)("div",{className:"fee-info",children:[(0,s.jsxs)("div",{className:"fee-row",children:[(0,s.jsx)("span",{children:"Bridge Fee"}),(0,s.jsxs)("span",{children:[parseFloat(g).toFixed(6)," ETH"]})]}),(0,s.jsxs)("div",{className:"fee-row",children:[(0,s.jsx)("span",{children:"You will receive"}),(0,s.jsxs)("span",{children:[N||"0"," HTH"]})]})]}),Z?(0,s.jsxs)("button",{className:"bridge-btn",onClick:()=>O(M.id),children:["Switch to ",M.shortName]}):(0,s.jsxs)("button",{className:"bridge-btn",onClick:L,disabled:!q||B,children:[B&&(0,s.jsx)("span",{className:"spinner"}),B?"Bridging...":"Bridge HTH"]}),"idle"!==y&&(0,s.jsxs)("div",{className:"status ".concat(y),children:[(0,s.jsx)("p",{children:_}),H&&(0,s.jsx)("p",{children:(0,s.jsx)("a",{href:"".concat("https://testnet.layerzeroscan.com/tx/").concat(H),target:"_blank",rel:"noopener noreferrer",children:"View on LayerZero Scan →"})})]}),(0,s.jsx)("div",{className:"balances",children:Object.entries(u).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"balance-item",children:[(0,s.jsxs)("div",{className:"balance-chain",children:[t.icon," ",t.shortName]}),(0,s.jsxs)("div",{className:"balance-amount",children:[parseFloat(F[a]||"0").toLocaleString()," HTH"]})]},a)})})]}):(0,s.jsx)("button",{className:"connect-btn",onClick:D,children:"Connect Wallet"})}),(0,s.jsxs)("div",{className:"footer",children:["Powered by ",(0,s.jsx)("a",{href:"https://layerzero.network",target:"_blank",rel:"noopener noreferrer",children:"LayerZero"})]})]})}}},function(e){e.O(0,[986,971,117,744],function(){return e(e.s=9848)}),_N_E=e.O()}]);