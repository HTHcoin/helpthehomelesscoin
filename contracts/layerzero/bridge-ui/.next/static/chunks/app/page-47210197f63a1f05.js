(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9848:function(e,t,a){Promise.resolve().then(a.bind(a,4457))},4457:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(7437),r=a(2265),n=a(9146),i=a(3600),l=a(5810),c=a(1662),o=a(5),d=a(4552);let u={sepolia:{id:11155111,name:"Ethereum Sepolia",shortName:"Sepolia",lzChainId:10161,rpcUrl:"https://1rpc.io/sepolia",explorer:"https://sepolia.etherscan.io",oftAddress:"0x688b1c1b22aA1bDff449285A6F954aFdC9DE05d9",isNative:!0,icon:"⟠"},arbitrumSepolia:{id:421614,name:"Arbitrum Sepolia",shortName:"Arb Sepolia",lzChainId:10231,rpcUrl:"https://sepolia-rollup.arbitrum.io/rpc",explorer:"https://sepolia.arbiscan.io",oftAddress:"0xcbAddD7bC31A41Fb9acC4f7de961d26d145d1FF6",isNative:!1,icon:"\uD83D\uDD35"},bscTestnet:{id:97,name:"BSC Testnet",shortName:"BSC Test",lzChainId:10102,rpcUrl:"https://bsc-testnet.public.blastapi.io",explorer:"https://testnet.bscscan.com",oftAddress:"0xcbAddD7bC31A41Fb9acC4f7de961d26d145d1FF6",isNative:!1,icon:"\uD83D\uDFE1"}},h=["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)","function lockedSupply() view returns (uint256)","function isNativeChain() view returns (bool)","function bridge(uint16 _dstChainId, bytes calldata _toAddress, uint256 _amount, address payable _refundAddress, address _zroPaymentAddress, bytes calldata _adapterParams) external payable","function estimateBridgeFee(uint16 _dstChainId, bytes calldata _toAddress, uint256 _amount, bool _useZro, bytes calldata _adapterParams) external view returns (uint256 nativeFee, uint256 zroFee)"];function p(){let[e,t]=(0,r.useState)(""),[a,p]=(0,r.useState)(null),[m,b]=(0,r.useState)(0),[w,f]=(0,r.useState)("sepolia"),[x,N]=(0,r.useState)("arbitrumSepolia"),[v,j]=(0,r.useState)(""),[g,C]=(0,r.useState)("0"),[k,F]=(0,r.useState)({}),[S,y]=(0,r.useState)("idle"),[A,T]=(0,r.useState)(""),[_,H]=(0,r.useState)(""),[B,z]=(0,r.useState)(!1),E=void 0!==window.ethereum,I=async()=>{if(!E){alert("Please install MetaMask to use this bridge");return}try{let e=new n.Q(window.ethereum),a=await e.send("eth_requestAccounts",[]),s=await e.getNetwork();p(e),t(a[0]),b(Number(s.chainId))}catch(e){console.error("Failed to connect:",e),alert("Failed to connect wallet")}},D=()=>{p(null),t(""),b(0),F({})},P=async e=>{if(!window.ethereum)return;let t="0x"+e.toString(16);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]})}catch(a){if(4902===a.code){let a=Object.values(u).find(t=>t.id===e);a&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:a.name,rpcUrls:[a.rpcUrl],blockExplorerUrls:[a.explorer]}]})}}},O=(0,r.useCallback)(async()=>{if(!e)return;let t={sepolia:["https://1rpc.io/sepolia","https://ethereum-sepolia-rpc.publicnode.com","https://rpc.sepolia.org"],arbitrumSepolia:["https://sepolia-rollup.arbitrum.io/rpc","https://arbitrum-sepolia.blockpi.network/v1/rpc/public"],bscTestnet:["https://bsc-testnet.public.blastapi.io","https://data-seed-prebsc-1-s1.binance.org:8545/","https://bsc-testnet-rpc.publicnode.com"]},a={};for(let[s,r]of Object.entries(u)){let n=t[s]||[r.rpcUrl],o=!1;for(let t of n){if(o)break;try{let n=new i.r6(t,void 0,{staticNetwork:!0}),d=new l.CH(r.oftAddress,h,n),u=await d.balanceOf(e);a[s]=c.bM(u,8),o=!0}catch(e){console.warn("RPC ".concat(t," failed for ").concat(s,", trying next..."))}}o||(console.error("All RPCs failed for ".concat(s)),a[s]="?")}F(a)},[e]),U=(0,r.useCallback)(async()=>{if(!v||0>=parseFloat(v)||w===x){C("0");return}try{let t=u[w],a=u[x],s=new i.r6(t.rpcUrl,void 0,{staticNetwork:!0}),r=new l.CH(t.oftAddress,h,s),n=c.vz(v,8),p=o.VT(["address"],[e||d.N]),[m]=await r.estimateBridgeFee(a.lzChainId,p,n,!1,"0x");C(c.dF(m))}catch(t){console.error("Failed to estimate fee:",t);try{let t=u[w],a=u[x],s={sepolia:"https://ethereum-sepolia-rpc.publicnode.com",arbitrumSepolia:"https://arbitrum-sepolia.blockpi.network/v1/rpc/public",bscTestnet:"https://bsc-testnet.public.blastapi.io"}[w]||t.rpcUrl,r=new i.r6(s),n=new l.CH(t.oftAddress,h,r),p=c.vz(v,8),m=o.VT(["address"],[e||d.N]),[b]=await n.estimateBridgeFee(a.lzChainId,m,p,!1,"0x");C(c.dF(b))}catch(e){console.error("Fallback fee estimation also failed:",e),C("~0.0001")}}},[v,w,x,e]),L=async()=>{if(!a||!e||!v)return;let t=u[w],s=u[x];if(m!==t.id){await P(t.id);return}z(!0),y("pending"),T("Preparing transaction...");try{let r=await a.getSigner(),n=new l.CH(t.oftAddress,h,r),i=c.vz(v,8),u=o.VT(["address"],[e]),[p]=await n.estimateBridgeFee(s.lzChainId,u,i,!1,"0x");T("Please confirm in MetaMask...");let m=await n.bridge(s.lzChainId,u,i,e,d.N,"0x",{value:p});H(m.hash),T("Transaction submitted, waiting for confirmation..."),await m.wait(),y("success"),T("Bridged ".concat(v," HTH from ").concat(t.shortName," to ").concat(s.shortName)),setTimeout(O,5e3)}catch(e){console.error("Bridge failed:",e),y("error"),T(e.reason||e.message||"Bridge failed")}finally{z(!1)}};(0,r.useEffect)(()=>{e&&O()},[e,O]),(0,r.useEffect)(()=>{let e=setTimeout(U,500);return()=>clearTimeout(e)},[U]),(0,r.useEffect)(()=>{if(!window.ethereum)return;let e=e=>{0===e.length?D():t(e[0])},a=e=>{b(parseInt(e,16))};return window.ethereum.on("accountsChanged",e),window.ethereum.on("chainChanged",a),()=>{window.ethereum.removeListener("accountsChanged",e),window.ethereum.removeListener("chainChanged",a)}},[]);let M=u[w];u[x];let V=e&&m!==M.id,Z=e&&v&&parseFloat(v)>0&&parseFloat(v)<=parseFloat(k[w]||"0");return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("h1",{children:"HTH Bridge"}),(0,s.jsx)("p",{children:"Bridge HTH tokens across chains via LayerZero"})]}),(0,s.jsx)("div",{className:"card",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"wallet-info",children:[(0,s.jsxs)("span",{className:"wallet-address",children:[e.slice(0,6),"...",e.slice(-4)]}),(0,s.jsx)("button",{className:"disconnect-btn",onClick:D,children:"Disconnect"})]}),(0,s.jsxs)("div",{className:"chain-selector",children:[(0,s.jsxs)("div",{className:"chain-select-wrapper",children:[(0,s.jsx)("label",{children:"From"}),(0,s.jsx)("select",{className:"chain-select",value:w,onChange:e=>{let t=e.target.value;t===x&&N(w),f(t)},children:Object.entries(u).map(e=>{let[t,a]=e;return(0,s.jsxs)("option",{value:t,children:[a.icon," ",a.shortName]},t)})}),m!==M.id&&(0,s.jsx)("button",{className:"switch-network-btn",onClick:()=>P(M.id),children:"Switch Network"})]}),(0,s.jsx)("button",{className:"swap-btn",onClick:()=>{f(x),N(w)},children:"⇄"}),(0,s.jsxs)("div",{className:"chain-select-wrapper",children:[(0,s.jsx)("label",{children:"To"}),(0,s.jsx)("select",{className:"chain-select",value:x,onChange:e=>{let t=e.target.value;t===w&&f(x),N(t)},children:Object.entries(u).map(e=>{let[t,a]=e;return(0,s.jsxs)("option",{value:t,children:[a.icon," ",a.shortName]},t)})})]})]}),(0,s.jsxs)("div",{className:"amount-section",children:[(0,s.jsxs)("div",{className:"amount-label",children:[(0,s.jsx)("span",{children:"Amount"}),(0,s.jsxs)("span",{children:["Balance: ",parseFloat(k[w]||"0").toLocaleString()," HTH"]})]}),(0,s.jsxs)("div",{className:"amount-input-wrapper",children:[(0,s.jsx)("input",{type:"number",className:"amount-input",placeholder:"0.0",value:v,onChange:e=>j(e.target.value)}),(0,s.jsx)("button",{className:"max-btn",onClick:()=>{j(k[w]||"0")},children:"MAX"}),(0,s.jsx)("span",{className:"token-badge",children:"HTH"})]})]}),(0,s.jsxs)("div",{className:"fee-info",children:[(0,s.jsxs)("div",{className:"fee-row",children:[(0,s.jsx)("span",{children:"Bridge Fee"}),(0,s.jsxs)("span",{children:[parseFloat(g).toFixed(6)," ETH"]})]}),(0,s.jsxs)("div",{className:"fee-row",children:[(0,s.jsx)("span",{children:"You will receive"}),(0,s.jsxs)("span",{children:[v||"0"," HTH"]})]})]}),V?(0,s.jsxs)("button",{className:"bridge-btn",onClick:()=>P(M.id),children:["Switch to ",M.shortName]}):(0,s.jsxs)("button",{className:"bridge-btn",onClick:L,disabled:!Z||B,children:[B&&(0,s.jsx)("span",{className:"spinner"}),B?"Bridging...":"Bridge HTH"]}),"idle"!==S&&(0,s.jsxs)("div",{className:"status ".concat(S),children:[(0,s.jsx)("p",{children:A}),_&&(0,s.jsx)("p",{children:(0,s.jsx)("a",{href:"".concat("https://testnet.layerzeroscan.com/tx/").concat(_),target:"_blank",rel:"noopener noreferrer",children:"View on LayerZero Scan →"})})]}),(0,s.jsx)("div",{className:"balances",children:Object.entries(u).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"balance-item",children:[(0,s.jsxs)("div",{className:"balance-chain",children:[a.icon," ",a.shortName]}),(0,s.jsxs)("div",{className:"balance-amount",children:[parseFloat(k[t]||"0").toLocaleString()," HTH"]})]},t)})})]}):(0,s.jsx)("button",{className:"connect-btn",onClick:I,children:"Connect Wallet"})}),(0,s.jsxs)("div",{className:"footer",children:["Powered by ",(0,s.jsx)("a",{href:"https://layerzero.network",target:"_blank",rel:"noopener noreferrer",children:"LayerZero"})]})]})}}},function(e){e.O(0,[986,971,117,744],function(){return e(e.s=9848)}),_N_E=e.O()}]);